```{r}

library(data.table)
library(ggplot2)

d <- fread("res.csv")
names(d) <- c("size","tool","ncores","cores","tcores","runtime","auc")

d[, pcores:=sub(" $","",paste(ncores,tcores))]

pcores_order <- unique(d$pcores)
d[, pcores:=factor(pcores, levels=pcores_order)]

```

```{r fig.height=8, fig.width=12}

ggplot(d) + geom_boxplot(aes(x = pcores, y = runtime, color = tool)) +
  coord_flip() + facet_wrap(~tool+size, scales = "free") + ylim(c(0,NA))

ggplot(d[ncores<=16]) + geom_boxplot(aes(x = pcores, y = runtime, color = tool)) +
  coord_flip() + facet_wrap(~tool+size, scales = "free") + ylim(c(0,NA))

ggplot(d[ncores>=16]) + geom_boxplot(aes(x = pcores, y = runtime, color = tool)) +
  coord_flip() + facet_wrap(~tool+size, scales = "free") + ylim(c(0,NA))

ggplot(d[ncores>=16 & !(tool=="lightgbm" & ncores==64)]) + 
  geom_boxplot(aes(x = pcores, y = runtime, color = tool)) +
  coord_flip() + facet_wrap(~tool+size, scales = "free") + ylim(c(0,NA))


dd <- d[ncores<=16 & !grepl(",",cores)]

ggplot(dd) + geom_boxplot(aes(x = pcores, y = runtime, color = tool)) +
  coord_flip() + facet_wrap(~tool+size, scales = "free") + ylim(c(0,NA))

dd[, runtime_norm := runtime*ncores/min(runtime*ncores), by=.(tool,size)]

ggplot(dd) + geom_boxplot(aes(x = pcores, y = runtime_norm, color = tool)) +
  coord_flip() + facet_wrap(~tool+size, scales = "free") + ylim(c(0,NA))


ggplot(d) + geom_boxplot(aes(x = as.factor(size), y = auc, color = tool)) 

```

